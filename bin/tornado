#!/usr/bin/env ruby

require 'tornado'
require 'optparse'

options = Hash.new

optparse = OptionParser.new do |opts|
  opts.banner = "Tornado"

  options[:upload] = nil
  opts.on('-u', '--upload FILE', 'Upload FILE') do |file|
    options[:upload] = file
  end

  options[:download] = nil
  opts.on('-d', '--download ID', 'Download file identified by ID') do |id|
    options[:download] = id
  end

  options[:peers] = false
  opts.on('-p', '--peers', 'Ask for known peers') do
    options[:peers] = true
  end
end.parse!

if options[:upload]
  Tornado::Network.upload options[:upload]
elsif options[:download]
  Tornado::Network.download options[:download]
elsif options[:peers]
  puts Tornado::Network.peers
end